filebeat.inputs:
  - type: log
    enabled: true
    paths:
      - /app/logs/*.json
    json.keys_under_root: true
    json.add_error_key: true
    json.message_key: message
    scan_frequency: 5s
    ignore_older: 0s
    close_inactive: 5m

output.elasticsearch:
    hosts: ["https://bce7-114-129-209-47.ngrok-free.app:443"]
    username: "kibana-user"
    password: "kb7%el#2"
    index: "logs-%{+yyyy.MM.dd}"

setup.template.name: "logs"
setup.template.pattern: "logs-*"

processors:
  - drop_fields:
      fields: ["log", "agent", "ecs", "host", "input"]
